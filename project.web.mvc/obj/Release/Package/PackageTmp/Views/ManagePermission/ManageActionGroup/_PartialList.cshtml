@*
    Author:   			hanhat
    Created: 			2015-10-21

    Last Modifier: tvchuong
    Last Modified: 2015-11-30
*@

@model MvcPaging.IPagedList<nvngoc29082015.permission.library.ManageActionGroup.ListActionGroupView>
@using MvcPaging

@{var i = 1;}

<div class="table-responsive">
    @if (Model.TotalItemCount > 0)
    {
        <div class="p-b-10">
            Kết quả tìm kiếm: <b>@Model.TotalItemCount</b>
        </div>
        <text>
            <table class="table table-bordered datatables dataTable">
                <thead>
                    <tr>
                        <th class="text-center" style="width:50px;">
                            <input id="CheckBoxAll" onclick="javascript: checkAlllist('#listcheckall',this);" type="checkbox" />
                        </th>
                        <th class="text-center" style="width:50px;">
                            #
                        </th>
                        <th class="">
                            @Html.DisplayNameFor(model => Model[0].ActionGroupID)
                        </th>
                        <th class="">
                            @Html.DisplayNameFor(model => Model[0].ActionGroupName)
                        </th>
                        <th class="">
                            @Html.DisplayNameFor(model => Model[0].ControllerName)
                        </th>
                        <th class="text-center ">
                            @Html.DisplayNameFor(model => Model[0].SoLuongAction)
                        </th>
                        <th class="text-center" style="width:200px;">
                            @Html.DisplayNameFor(model => Model[0].IsActive)
                        </th>
                        <th class="text-center" style="width:100px;"> Tác Vụ</th>

                    </tr>
                </thead>
                <tbody id="listcheckall">
                    @foreach (var item in Model)
                    {
                        <tr data="@item.ActionGroupGuid" class="showhim">
                            <td class="text-center">
                                <input type="checkbox" class="checkbox-item" value="@item.ActionGroupGuid" />
                            </td>
                            <td class="text-center ">
                                @Html.Raw((Model.PageNumber - 1) * Model.PageSize + i)
                                @{i++;}
                            </td>
                            <td class="">
                                @Html.Raw(item.ActionGroupID)
                            </td>
                            <td class="">
                                @Html.Raw(item.ActionGroupName)
                            </td>
                            <td class="">
                                @Html.Raw(item.ControllerName)
                            </td>
                            <td class="text-center ">
                                @Html.Raw(item.SoLuongAction)
                            </td>
                            <td class="text-center ">
                                @Html.CheckBoxFor(x => item.IsActive, new { disabled = "disabled" })
                            </td>
                            <td class="text-center ">

                                <a data-otf-confirm="Bạn có chắc muôn xóa?"
                                   title="Xóa dữ liệu này" href="javascript:void(0)"
                                   onclick="ManageActionGroup_ActionGroup_DeleteMulti(this)"
                                   data-otf-target="#CPManageActionGroup"
                                   data-otf-input="#SearchActionGroup"
                                   data-otf-action-target="@Url.Action("ActionGroupGet_List", "ManagePermission")?k="
                                   data-otf-action="@Url.Action("ActionGroupDelete", "ManagePermission", null, Request.Url.Scheme)?id=@item.ActionGroupGuid">
                                    <i class="fa fa-lg fa-trash-o text-danger"></i>
                                </a>
                                &nbsp;
                                <a href="@Url.Action("ActionGroupEdit", "ManagePermission", null, Request.Url.Scheme)?id=@item.ActionGroupGuid"
                                   title="Chỉnh sửa">
                                    <i class="fa fa-lg fa-pencil-square-o text-info"></i>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </text>
    }
    else
    {
        <text><br />
    <div class="alert alert-dismissable alert-info">
        <strong>Yêu cầu tìm kiếm lúc @{ var date = DateTime.Now; } @date.ToString("HH:mm:ss dd/MM/yyyy") không có dữ liệu</strong>
        <button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
    </div>
        </text>
    }
    <div class="pager">
        @if (Model.TotalItemCount > Model.PageSize)
        {

            <text>

                @Html.Raw(Ajax.Pager(
                           new Options
                           {
                               PageSize = Model.PageSize,
                               TotalItemCount = Model.TotalItemCount,
                               CurrentPage = Model.PageNumber,
                               ItemTexts = new ItemTexts() { Next = "Next", Previous = "Previous", Page = "" },
                               ItemIcon = new ItemIcon() { First = "icon-backward", Previous = "icon-chevron-left", Next = "icon-chevron-right", Last = "icon-forward" },
                               TooltipTitles = new TooltipTitles() { Next = "Next page", Previous = "Previous page", Page = "Page {0}." },
                               Size = Size.normal,
                               Alignment = Alignment.centered,
                               IsShowControls = true,
                               IsShowFirstLast = true,
                               CssClass = ""
                           },
                           new AjaxOptions
                           {
                               UpdateTargetId = "CPManageActionGroup"
                           }, new { controller = "ManagePermission", action = "ActionGroupGet_List", k = @ViewData["keysearch"], id = ViewData["id"] }))
            </text>
        }
    </div>
</div>

@using (Html.BeginScriptContext())
{
    Html.AddScriptBlock(
        @<script type="text/javascript">
            //Su dung cau hinh dropdownlist
            var config = {
                '.chosen-select': {},
                '.chosen-select-deselect': { allow_single_deselect: true },
                '.chosen-select-no-single': { disable_search_threshold: 10 },
                '.chosen-select-no-results': { no_results_text: 'Lỗi! Vui lòng chọn ít nhất 1 mục.' },
                '.chosen-select-width': { width: "95%" }
            }
            for (var selector in config) {
                $(selector).chosen(config[selector]);
            }


        </script>
, true);
}



